const debug = require('debug')('text-stream-accumulator');

module.exports = class TextStreamAccumulator {

  constructor(stream) {
    // the text that was been accumulated so far
    this._accumulatedText = '';
    stream.on('data', this._onStreamData.bind(this));
  }

  // Called when new text arrives
  _onStreamData(data) {
    const text = data.toString();
    debug(`receiving data: ${text}`);
    this._accumulatedText += text;
  }

  toString() {
    return this._accumulatedText;
  }

  reset() {
    debug('reseting accumulated text');
    this._accumulatedText = '';
  }
};